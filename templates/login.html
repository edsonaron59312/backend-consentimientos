<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iniciar Sesión - Gestión Salesland</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <style>
        :root {
            /* Light Theme Variables */
            --primary-color-light: #074F69;
            --secondary-color-light: #053a4e; /* For hovers or secondary actions */
            --bg-color-light: #f0f2f5;    /* Page background */
            --text-color-light: #212529;  /* Main text color */
            --card-bg-light: #fff;       /* Card background */
            --input-bg-light: #fff;
            --input-text-light: #495057;
            --input-border-light: #ced4da;
            --link-color-light: var(--primary-color-light);

            /* Effective variables for light theme (defaults) */
            --effective-primary-color-rgb: 7, 79, 105;
            --effective-primary-color: var(--primary-color-light);
            --effective-secondary-color: var(--secondary-color-light);
            --effective-bg-color: var(--bg-color-light);
            --effective-text-color: var(--text-color-light);
            --effective-card-bg: var(--card-bg-light);
            --effective-input-bg: var(--input-bg-light);
            --effective-input-text: var(--input-text-light);
            --effective-input-border: var(--input-border-light);
            --effective-link-color: var(--link-color-light);
        }

        html[data-theme="dark"] {
            /* Dark Theme Variable Overrides */
            --primary-color-dark: #5096dc;
            --secondary-color-dark: #3b7cb8;
            --bg-color-dark: #131314;
            --text-color-dark: #e8eaed;
            --card-bg-dark: #1e1f20;
            --input-bg-dark: #2a2b2c;
            --input-text-dark: #e8eaed;
            --input-border-dark: #5f6368;
            --link-color-dark: #8ab4f8;

            /* Effective variables for dark theme */
            --effective-primary-color-rgb: 80, 150, 220;
            --effective-primary-color: var(--primary-color-dark);
            --effective-secondary-color: var(--secondary-color-dark);
            --effective-bg-color: var(--bg-color-dark);
            --effective-text-color: var(--text-color-dark);
            --effective-card-bg: var(--card-bg-dark);
            --effective-input-bg: var(--input-bg-dark);
            --effective-input-text: var(--input-text-dark);
            --effective-input-border: var(--input-border-dark);
            --effective-link-color: var(--link-color-dark);
        }

         body {
            background-color: var(--effective-bg-color);
            color: var(--effective-text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            transition: background-color 0.3s, color 0.3s;
        }
        .login-card {
            width: 100%;
            max-width: 400px;
            padding: 30px;
            background-color: var(--effective-card-bg);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border: 1px solid var(--effective-input-border); /* Use input border for consistency */
            transition: background-color 0.3s, border-color 0.3s, box-shadow 0.3s;
        }
        html[data-theme="dark"] .login-card {
             box-shadow: 0 1px 2px 0 rgba(0,0,0,.6), 0 1px 3px 1px rgba(0,0,0,.3);
        }

        .login-card .logo-placeholder {
            width: 70px; height: 70px;
            background-color: var(--effective-primary-color);
            color: #fff; /* White text on primary color bg */
            border-radius: 50%; margin: 0 auto 25px auto; display: flex; align-items: center;
            justify-content: center; font-weight: bold; font-size: 1.8em;
        }
         html[data-theme="dark"] .login-card .logo-placeholder {
              color: #131314; /* Dark text for light blue logo bg in dark mode */
         }

        .form-label {
            color: var(--effective-text-color);
        }
        .form-control {
            background-color: var(--effective-input-bg);
            color: var(--effective-input-text);
            border: 1px solid var(--effective-input-border);
        }
        .form-control::placeholder {
            color: var(--effective-input-text);
            opacity: 0.7;
        }
        html[data-theme="dark"] .form-control::placeholder {
            color: var(--input-text-dark);
            opacity: 0.5;
        }
        .form-control:focus {
            background-color: var(--effective-input-bg);
            color: var(--effective-input-text);
            border-color: var(--effective-primary-color);
            box-shadow: 0 0 0 0.25rem rgba(var(--effective-primary-color-rgb), 0.25);
        }
        .btn-primary {
            background-color: var(--effective-primary-color);
            border-color: var(--effective-primary-color);
            color: #fff; /* White text for primary buttons */
            transition: background-color 0.3s, border-color 0.3s, filter 0.3s;
        }
        html[data-theme="dark"] .btn-primary {
             color: #131314; /* Dark text for light blue button in dark mode */
        }
         .btn-primary:hover {
            filter: brightness(90%);
        }
        html[data-theme="dark"] .btn-primary:hover {
             filter: brightness(110%);
        }

        .login-card a {
            color: var(--effective-link-color);
            text-decoration: none;
        }
        .login-card a:hover {
            text-decoration: underline;
        }

        /* Alert styles */
        .alert {
            background-color: var(--effective-card-bg);
            border: 1px solid var(--effective-input-border);
            color: var(--effective-text-color);
        }
        .alert-danger {
            background-color: rgba(220, 53, 69, 0.1); /* Light red for light theme */
            border-color: rgba(220, 53, 69, 0.3);
            color: #b02a37;
        }
        html[data-theme="dark"] .alert-danger {
            background-color: rgba(241, 112, 112, 0.15); /* Darker red bg for dark theme */
            border-color: rgba(241, 112, 112, 0.4);
            color: #f19494; /* Lighter red text for dark theme */
        }
         .alert-success {
            background-color: rgba(25, 135, 84, 0.1);
            border-color: rgba(25, 135, 84, 0.3);
            color: #0f5132;
        }
        html[data-theme="dark"] .alert-success {
            background-color: rgba(60, 158, 112, 0.15);
            border-color: rgba(60, 158, 112, 0.4);
            color: #78c8a0;
        }
         .alert-info {
            background-color: rgba(13, 202, 240, 0.1);
            border-color: rgba(13, 202, 240, 0.3);
            color: #087990;
        }
        html[data-theme="dark"] .alert-info {
            background-color: rgba(58, 176, 204, 0.15);
            border-color: rgba(58, 176, 204, 0.4);
            color: #85d1e7;
        }
        .btn-close {
            filter: invert(0.5) sepia(1) saturate(0) hue-rotate(0deg); /* Default for light */
        }
        html[data-theme="dark"] .btn-close {
            filter: invert(1) grayscale(100%) brightness(200%); /* White for dark theme */
        }


    </style>
</head>
<body>
    <div class="login-card">
        <div class="logo-placeholder"><span>P</span></div>
        <h3 class="text-center mb-4">Iniciar Sesión</h3>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <form method="POST" action="{{ url_for('login') }}">
            <div class="mb-3">
                <label for="correo" class="form-label">Correo Electrónico</label>
                <input type="email" class="form-control" id="correo" name="correo" required autofocus>
            </div>
            <div class="mb-3">
                <label for="contrasena" class="form-label">Contraseña</label>
                <input type="password" class="form-control" id="contrasena" name="contrasena" required>
            </div>
            <div class="d-grid">
                <button type="submit" class="btn btn-primary btn-lg">Ingresar</button>
            </div>
        </form>

        <p class="text-center mt-3">
            ¿No tienes cuenta? <a href="{{ url_for('register') }}">Regístrate aquí</a>
        </p>
        </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Theme toggling logic
        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            // No toggle switch on this page, so no need to update its state
        }

        // Initialize theme on page load
        let initialTheme = localStorage.getItem('theme');
        if (!initialTheme) {
            initialTheme = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }
        setTheme(initialTheme);
    </script>
</body>
</html>