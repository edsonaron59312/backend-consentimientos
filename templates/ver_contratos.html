{% extends "base_main_layout.html" %}

{% block title %}Ver Contratos Registrados - Gestión Salesland{% endblock %}

{% block head_extra_css %}
<style>
body, main, .content, .wrapper, .content-wrapper, .page-content {
    margin-top: 0 !important;
    padding-top: 0 !important;
}
.page-header {
    margin-top: 0 !important;
    padding-top: 0.3rem !important;
    padding-bottom: 0.3rem !important;
    margin-bottom: 1rem;
}
.page-header h1 {
    margin-top: 0 !important;
    padding-top: 0 !important;
}
    .table-responsive {
        margin-top: 1rem;
    }
    .table th {
        font-weight: 600;
        background-color: #e9ecef; /* Un fondo ligero para las cabeceras de la tabla */
    }
    [data-bs-theme="dark"] .table th {
        background-color: #3a3f44;
        color: #adb5bd;
    }
    [data-bs-theme="dark"] .table-striped > tbody > tr:nth-of-type(odd) > * {
        --bs-table-accent-bg: rgba(255, 255, 255, 0.03); /* Color de fila alterno más sutil en modo oscuro */
    }
    .table td, .table th {
        vertical-align: middle;
    }
    .page-header {
        background-color: #ffffff;
        padding: 1.5rem 1rem;
        margin-bottom: 2rem;
        border-radius: 0.5rem;
        box-shadow: 0 0.125rem 0.25rem rgba(0,0,0,.075);
    }
    [data-bs-theme="dark"] .page-header {
        background-color: #2c3034; /* Color de tarjeta en modo oscuro */
    }
    .page-header h1 {
        color: #074F69; /* Color primario del sidebar */
        margin-bottom: 0;
        font-weight: 600;
    }
    [data-bs-theme="dark"] .page-header h1 {
        color: #8ab4f8; /* Color de acento para modo oscuro */
    }

</style>
{% endblock %}

{% block content_header %}
<div class="page-header">
    <h1 class="text-center"><i class="bi bi-list-ul me-2"></i>Contratos Registrados</h1>
</div>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css">
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>
<script src="/static/js/ver_contratos_datatable.js"></script>

<div class="table-responsive">
    <table id="tabla-contratos" class="table table-striped table-hover table-bordered" style="width:100%">
        <thead class="thead-light">
            <tr>
                <th>ID</th>
                <th style="min-width: 220px; width: 22%">Nombre Cliente</th>
                <th>Tipo Documento</th>
                <th>Número Documento</th>
                <th>Celular</th>
                <th>Lugar Nacimiento</th>
                <th>Fecha Nacimiento</th>
                <th>Correo Cliente</th>
                <th>Plan</th>
                <th>Precio Plan</th>
                <th>Ciclo Final Día</th>
                <th>Prorrateo Día Aplicado</th>
                <th>Fecha Cierre</th>
                <th>Prorrateo Total</th>
                <th>Fecha Activación</th>
                <th>Fecha Pago</th>
                <th>Fecha Referencia (Hoy)</th>
                <th>Fecha Registro</th>
                <th>Registrado Por</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>
<!-- La tabla estática antigua fue eliminada. El DataTable dinámico se inicializa por JS y carga por AJAX. -->
<div class="mt-4">
    <a href="{{ url_for('ciclos_prorrateos_html.mostrar_formulario_ingreso_ciclos') }}" class="btn btn-primary">
        <i class="bi bi-plus-circle-fill me-2"></i>Registrar Nuevo Contrato
    </a>
</div>
{% endblock %}